# 자동차 안정성 제어

이 저장소는 아두이노, 관성 센서, 모터를 이용하여 기본적인 안정성 제어를 실험하는 작은 프로젝트의 코드와 참고 자료를 포함합니다. 센서 값은 시리얼 연결을 통해 기록되며, 간단한 PID 루프를 사용하여 모터를 제어합니다.

## 디렉터리 구조

- `src/` – 센서 데이터를 수집하는 아두이노 스케치(`*.ino`)와 파이썬 스크립트가 들어 있습니다.
- `pic/` – 하드웨어 세팅을 찍은 사진과 짧은 영상들입니다.
- `preceding_papers/` – 개발 과정에서 참고한 연구 논문들입니다.
- `report/` – 포스터와 프로젝트 보고서가 저장되어 있습니다.

`src` 하위 디렉터리에는 여러 실험을 위한 코드가 있습니다. 주요 파이썬 스크립트는 `src/main.py`와 `src/last/last.py`입니다.

## 파이썬 스크립트 실행 방법

스크립트 실행에는 Python 3와 `pyserial` 패키지가 필요합니다. 다음 명령으로 설치할 수 있습니다.

```bash
pip install pyserial
```

### `src/main.py`

이 스크립트는 아두이노에서 연속적으로 전송되는 데이터를 읽어 현재 시간 기반의 CSV 파일로 저장합니다. 스크립트 초반에 있는 `port` 변수를 사용 중인 보드의 시리얼 포트(예: Windows의 `COM3`, Linux의 `/dev/ttyUSB0`)에 맞게 수정한 후 실행합니다.

```bash
python src/main.py
```

### `src/last/last.py`

`last.py`는 `time,angle,y_velocity` 형식의 데이터를 기대하며 비슷한 작업을 수행합니다. 4번째 줄의 `serial.Serial`에 전달되는 포트를 수정한 후 다음과 같이 실행합니다.

```bash
python src/last/last.py
```

수신된 값은 `sensor_data.csv`에 저장됩니다.

## 아두이노 스케치 빌드 및 업로드

1. Arduino IDE에서 원하는 `.ino` 파일(예: `src/231031_control/231031_control.ino`)을 엽니다.
2. **도구** 메뉴에서 올바른 보드 유형과 시리얼 포트를 선택합니다.
3. **검증** 버튼으로 빌드한 뒤 **업로드** 버튼을 눌러 보드에 프로그램을 업로드합니다.

스케치는 IMU(MPU6050/MPU9250)와 모터 드라이버가 각각의 파일에 명시된 핀에 연결되어 있다고 가정합니다. 선택한 스케치의 핀 정의에 맞게 센서와 모터 드라이버를 연결해야 합니다.

---

이 문서는 프로젝트 구조를 간략히 소개하고 제공된 파이썬 스크립트 실행 방법과 아두이노 코드 업로드 방법을 설명합니다.
